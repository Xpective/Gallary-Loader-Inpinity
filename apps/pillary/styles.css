:root {
  --bg:#0b0f14; --fg:#dfe7f1; --muted:#94a3b8; --accent:#a78bfa;
  --glowG:#10b981; --glowR:#ef4444;

  /* Sand/Stein-Look */
  --stone:#111827; --stone-edge:#1f2937;
}

/* Backdrop */
html,body{height:100%;margin:0;background:linear-gradient(#0b0f14,#0a0d13 40%, #080b11);}
a{color:var(--accent);text-decoration:none}

#stageWrap{position:relative;overflow:auto;height:calc(100% - 96px);}
#stage{transform-origin:0 0; position:relative; padding:24px; width:max-content; }

/* Kacheln wie Steinblöcke */
.tile{
  position:absolute; width:32px; height:32px; border-radius:4px; overflow:hidden;
  background:var(--stone);
  border:1px solid #0b1222;
  box-shadow:
    0 0 0 1px #000 inset,
    0 2px 4px rgba(0,0,0,.35),
    0 0 6px rgba(0,0,0,.25);
  will-change: transform, filter;
}
.tile video, .tile img{
  width:100%; height:100%; display:block; object-fit:cover; filter:saturate(1.12) contrast(1.02);
}

/* Apex-Glow (Reihe 0 → Index 0) */
.tile[data-index="0"]{
  box-shadow:0 0 0 1px #000 inset, 0 0 12px rgba(255,215,128,.6), 0 2px 4px rgba(0,0,0,.35);
}

/* π-Digit-Badge */
.tile .digit{
  position:absolute; left:0; right:0; bottom:0; height:14px; font-size:11px; line-height:14px;
  text-align:center; background:#0007; color:#e5e7eb; backdrop-filter:blur(1px); pointer-events:none;
}

/* Achsen markieren (grünlich) */
.tile.axis{ outline:1px dashed #6ee7b7; box-shadow:0 0 0 1px #064e3b inset; }

/* Marktplatz/Geräte-Status */
.tile[data-status="listed"]{
  animation:pulse 1.6s infinite ease-in-out;
  box-shadow:0 0 10px 1px #7f1d1d, 0 0 6px rgba(127,29,29,.8);
  filter:drop-shadow(0 0 5px var(--glowR));
}
@keyframes pulse{ 0%,100%{ outline:1px solid #7f1d1d; } 50%{ outline:1px solid #ef4444; } }

.tile[data-status="unminted"]{ opacity:.45; filter:grayscale(.5) }
.tile[data-status="verified"]::after{
  content:""; position:absolute; inset:-2px; border-radius:6px; pointer-events:none;
  box-shadow:0 0 10px 2px #10b981aa;
}
.tile.failed{ opacity:.6; filter:grayscale(.6) contrast(.9) }

/* Market-Badge */
.tile[data-market="me"]::before,
.tile[data-market="okx"]::before,
.tile[data-market="both"]::before{
  content: attr(data-market);
  position:absolute; left:2px; top:2px; font-size:9px; line-height:1;
  background:#0f172a; color:#cbd5e1; padding:2px 4px; border-radius:4px;
  text-transform: uppercase; letter-spacing:.5px; opacity:.9;
}

/* Rarity-Overlay (—heat) + Sandton-Gradient */
.tile::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  /* Rarity-Color via --rar (0..1). HSL: 220->0 hue map */
  background: linear-gradient(180deg,
    hsla(calc(220 - var(--rar,0)*220), 85%, 60%, calc(var(--rar,0)*.75)) 0%,
    rgba(0,0,0,0) 65%);
  mix-blend-mode:overlay;
}

/* Optional: Heatmap per Toggle (kompatibel mit deinem Schalter) */
.tile[data-heat]::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(50% 50% at 50% 60%,
    rgba(255,255,255,.06) 0%, rgba(0,0,0,0) 60%);
}

/* Modal, Footer bleiben wie gehabt */